apiVersion: template.openshift.io/v1
kind: Template
labels:
  app: pulp-example
  template: pulp-example
metadata:
  annotations:
    description: |-
      A quick way to test and try Pulp running in OpenShift clusters. For more information about using this template see ...

      WARNING: Any data stored will be lost upon pod destruction. Only use this template for testing.
    openshift.io/display-name: Pulp (Ephemeral)
    openshift.io/documentation-url: https://docs.pulpproject.org/pulpcore/
    openshift.io/long-description: This template defines resources needed
      to install Pulp. The database is stored in non-persistent storage,
      so this configuration should be used for experimental purposes only.
    openshift.io/support-url: https://github.com/pulp/pulp-operator/issues
    samples.operator.openshift.io/version: 4.10.12
    tags: quickstart,pulp
    template.openshift.io/bindable: "false"
    iconClass: icon-python
  labels:
    samples.operator.openshift.io/managed: "false"
  name: pulp-example
objects:
- apiVersion: operators.coreos.com/v1alpha1
  kind: Subscription
  metadata:
    labels:
      operators.coreos.com/pulp-operator.pulp: ""
    name: pulp-operator
  # namespace: "${ENV_NAME}"
  spec:
    channel: alpha
    installPlanApproval: Automatic
    name: pulp-operator
    source: community-operators
    sourceNamespace: openshift-marketplace
    config:
      resources:
        requests:
          memory: "64Mi"
          cpu: "250m"
        limits:
          memory: "128Mi"
          cpu: "500m"
- apiVersion: cloud.redhat.com/v1alpha1
  kind: ClowdApp
  metadata:
    name: pulp-clowdapp
  #  namespace: "${ENV_NAME}"
  spec:
    envName: "${ENV_NAME}"
    deployments:
    - name: pulp-cr-generator
      podSpec:
        # dummy container
        image: "quay.io/fedora/fedora:latest"
        command: ['vi']
    database:
      name: pulp-db
      version: 15
parameters:
  - name: ENV_NAME
    description: Specify your (ephemeral) namespace
    eequired: true
